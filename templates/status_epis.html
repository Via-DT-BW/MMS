{% extends 'home_portaria.html' %}
{% block content %}



<head>
    <link href="https://unpkg.com/bootstrap-table@1.19.1/dist/bootstrap-table.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/tableexport.jquery.plugin@1.10.21/tableExport.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tableexport.jquery.plugin@1.10.21/libs/jsPDF/jspdf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tableexport.jquery.plugin@1.10.21/libs/jsPDF-AutoTable/jspdf.plugin.autotable.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.19.1/dist/bootstrap-table.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.19.1/dist/extensions/export/bootstrap-table-export.min.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
    <script type='text/javascript' src='http://code.jquery.com/jquery-1.6.4.js'></script>
    <style type="text/css">
    #coisas {
        margin-left: 5px;
        margin-right: 5px;
    }
    </style>
</head>

<body>
    <div>
        <!--  FLASH MENSAGENS!-->
        {% with messages = get_flashed_messages() %}
        {% if messages %}
        {% for message in messages %}
        <div class="alert alert-info" role="alert">
            <span>{{ message }}</span>
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        {% endfor %}
        {% endif %}
        {% endwith %}
    </div>
    <div class="container.fluid" id="coisas">
    	<div class="row">
    		<div class="col">
    			<h1 class="mt-4">Registo Epi's </h1>
    			<button type="button" class="btn btn-success" data-toggle="modal" data-target="#adicionar_registo">Adicionar Registo</button>

    		</div>
    		
    	</div>
        <br>
        
        <div class="card mb-4">
            <div class="card-header">
                <i class="fas fa-table me-1"></i>
                Registo Epi's 
            </div>
            <div class="card-body">
                <table id="table"  class="table table-striped " data-search="true" data-toggle="table" data-show-export="false" data-show-columns="false" data-show-multi-sort="false" data-pagination="true" data-toolbar="#toolbar" data-show-toggle="true" data-resizable="false">
                    <thead id="box" class="bg-light">
                        <tr>
                            <th data-field="1" data-sortable="true" >Registo entrada</th>
                            <th data-field="2" data-sortable="true">Registo saida</th>
                            <th data-field="3" data-sortable="true">Nome</th>
                            <th data-field="4" data-sortable="true">BW ID</th>
                            <th data-field="5" data-sortable="true">oculos</th>
                            <th data-field="6" data-sortable="true">Uniform</th>
                            <th data-field="7" data-sortable="true">Sapatos</th>
                            <th data-field="8" data-sortable="true">Card ID</th>
                        
                            <th>Saida</th>    
                        </tr>
                    </thead>
                    <tbody id="tableInfos">
                        <tr>{% for row in epis_data %}

                            <td>{{row.1}}</td>
                            {% if row.2 == None %}
                            <td></td>
                            {% else %}
                            <td>{{row.2}}</td>
                            {% endif %} 
                            <td>{{row.3}}</td>
                            <td>{{row.4}}</td>
                            <td>{{row.5}}</td>
                            <td>{{row.6}}</td>
                            <td>{{row.7}}</td>
                            <td>{{row.8}}</td>
                            {% if row.2 == None %}
                            <td><button type="button" class="btn btn-success" data-toggle="modal" data-target="#saida{{row.0}}">Saida</button></td>
                            {% else %}
                            <td></td>
                            {% endif %}
                        </tr>
                        <!-- Modal escolher opção -->
                        <div class="modal fade" id="saida{{row.0}}" role="dialog">
                            <div class="modal-dialog modal-sm">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h4 class="modal-title">Registo Devolução</h4>
                                    </div>
                                    <div class="modal-body">
                                        <form action="registar_saida_epi/{{row.0}}" method="POST">
                                            <div class="row">
                                                <div class="col">
                                                    <div class="form-group">
                                                        <label class="control-label">Nome</label>
                                                        <div>
                                                            <input type="text" class="form-control" id="var_1" name="var_1"  maxlength="50" placeholder="{{row.3}}" Disabled />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    <div class="form-group">
                                                        <label class="control-label">Hora entrada</label>
                                                        <div>
                                                            <input type="text" class="form-control" id="var_2" name="var_2"  maxlength="50"placeholder="{{row.1}}" Disabled />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col">
                                                    <div class="form-group">
                                                        <label class="control-label">Observações</label>
                                                        <div>
                                                            <input type="text" class="form-control" id="var_3" name="var_3" maxlength="50" placeholder="Obs"  />
                                                        </div>
                                                    </div>
                                                </div>                                                
                                            </div>
                                            
                                            

                                            <div class="form-group">
                                                <button type="submit" class="btn btn-primary ">Registar Devolução</button>
                                            </div>
                                        </form>
                                    </div>
                                    <!-- Atenção colocar o Footer senao 2a modal nao funciona -->
                                    <div class="modal-footer">
                                        <button type="button" class="btn" style="background-color: silver" data-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </tbody>
                </table>

                <!-- Modal Adicionar opção -->
                <div class="modal fade" id="adicionar_registo" role="dialog">
                    <div class="modal-dialog modal-md">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h4 class="modal-title">Criar Registo de EPI's</h4>
                            </div>
                            <div class="modal-body">
                                <form action="add_epis" method="POST">
                                    <div class="row">
                                        <div class="col">
                                            <div class="form-group">
                                                <label class="control-label">Nome</label>
                                                <div>
                                                    <input type="text" class="form-control" id="var_1" name="var_1" maxlength="50" placeholder="Carlos Filipe" required/>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group">
                                                <label class="control-label">Identificação</label>
                                                <div>
                                                    <input type="text" class="form-control" id="var_2" name="var_2"maxlength="50"  placeholder="Borgwarner" required />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-6">
                                            <div class="form-group">
                                                <label class="control-label">Cartão BW</label>
                                                <div>
                                                    <input type="text" class="form-control" id="var_3" name="var_3"maxlength="50" placeholder ="301" required />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-3">
                                        	<div class="form-group">
	                                            <label class="control-label">Oculos</label>
			                                    <select class="form-control" type="text" name="var_4" id="var_4" required>
			                                        <option value="Não">Não</option>
			                                        <option value="Sim">Sim</option>
			                                    </select>
		                                	</div>
		                           		</div>
                                        <div class="col-3">
                                        	<div class="form-group">
	                                            <label class="control-label">Bata</label>
			                                    <select class="form-control" type="text" name="var_5" id="var_5" required>
			                                        <option value="Não">Não</option>
			                                        <option value="XS">XS</option>
			                                        <option value="S">S</option>
			                                        <option value="M">M</option>
			                                        <option value="L">L</option>
			                                        <option value="XL">XL</option>
			                                    </select>
		                                    </div>
                                        </div>
                                        <div class="col-3">
                                        	<div class="form-group">
	                                            <label class="control-label">Sapatos</label>
			                                    <select class="form-control" type="text" name="var_6" id="var_6" required>
			                                        <option value="Não">Não</option>
			                                        <option value="35">35</option>
			                                        <option value="36">36</option>
			                                        <option value="37">37</option>
			                                        <option value="38">38</option>
			                                        <option value="39">39</option>
			                                        <option value="40">40</option>
			                                        <option value="41">41</option>
			                                        <option value="42">42</option>
			                                        <option value="43">43</option>
			                                        <option value="44">44</option>
			                                        <option value="45">45</option>
			                                    </select>
		                                	</div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-6">
                                            <div class="form-group">
                                                <label class="control-label">Cartão id</label>
                                                <div>
                                                    <input type="text" class="form-control" id="var_7" name="var_7" maxlength="50" placeholder ="Ex: 12123" required />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <br>

                                    <div class="form-group">
                                        <button type="submit" class="btn btn-primary ">Adicionar</button>
                                    </div>
                                </form>
                            </div>
                            <!-- Atenção colocar o Footer senao 2a modal nao funciona -->
                            <div class="modal-footer">
                                <button type="button" class="btn" style="background-color: silver" data-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


</body>

</html>
<script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest" crossorigin="anonymous"></script>
<script src="static/scripts/js/datatables-simple-demo.js"></script>









{% endblock %}